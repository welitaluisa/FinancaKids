# -*- coding: utf-8 -*-
"""finan-a-kids.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/gist/welitaluisa/5fd9a6ac64f165b87ba16718d92ebe0f/finan-a-kids.ipynb
"""



"""# FinanÃ§a Kids: Seu Chatbot Educacional de FinanÃ§as para CrianÃ§as com Moeda MÃ¡gica

![Moeda MÃ¡gica](https://live.staticflickr.com/65535/54526439355_8f7f9cec84_n.jpg)

FinanÃ§a Kids: Seu Chatbot Educacional de FinanÃ§as para CrianÃ§as com a Moeda MÃ¡gica
DescriÃ§Ã£o do Projeto
O FinanÃ§a Kids Ã© um chatbot interativo e divertido desenvolvido em Python, utilizando o framework de agentes do Google ADK. O objetivo Ã© introduzir conceitos bÃ¡sicos de educaÃ§Ã£o financeira para crianÃ§as na faixa etÃ¡ria de 7 a 14 anos atravÃ©s da personagem encantadora Moeda MÃ¡gica. O chatbot guia as crianÃ§as em uma jornada de aprendizado sobre poupanÃ§a, definiÃ§Ã£o de objetivos financeiros e planejamento para alcanÃ§Ã¡-los.

Funcionalidades
Boas-vindas MÃ¡gicas (Agente de Boas-Vindas e IntenÃ§Ã£o): Apresenta a personagem Moeda MÃ¡gica e inicia a conversa, identificando o interesse da crianÃ§a.

DefiniÃ§Ã£o do Sonho MÃ¡gico (Agente de DefiniÃ§Ã£o de Objetivos): Ajuda a crianÃ§a a definir um objetivo que deseja alcanÃ§ar e oferece a opÃ§Ã£o de busca para esse objetivo com informaÃ§Ãµes sobre finanÃ§as para crianÃ§a.

Lupa MÃ¡gica de PreÃ§os (Agente de Busca de PreÃ§os): Utiliza a busca do Google para fornecer informaÃ§Ãµes sobre preÃ§os e opÃ§Ãµes mais em conta para o objetivo da crianÃ§a, apresentando os resultados de forma amigÃ¡vel e mencionando lojas.

ExplicaÃ§Ã£o da Magia da PoupanÃ§a (Agente de ExplicaÃ§Ã£o da PoupanÃ§a): Ensina o conceito de poupanÃ§a usando analogias simples e exemplos prÃ¡ticos.

CriaÃ§Ã£o do Mapa da Magia (Agente de Plano de PoupanÃ§a): Auxilia na criaÃ§Ã£o de um plano de poupanÃ§a com base nas fontes de dinheiro da crianÃ§a e no custo estimado do objetivo.

Acompanhamento da Aventura (Agente de Acompanhamento): Simula o acompanhamento do progresso da crianÃ§a, oferecendo incentivo.

Aprendendo Mais: Aborda tÃ³picos como o funcionamento do dinheiro, a diferenÃ§a entre precisar e querer, e a importÃ¢ncia de ajudar outras pessoas.

Como Executar o Projeto
Este projeto utiliza o Google ADK e Ã© ideal para executar no Google Colaboratory (Colab):

Acesse o Google Colab: Abra seu navegador e vÃ¡ para https://colab.research.google.com/.

Crie um Novo Notebook: Clique em "Novo notebook".

Cole o CÃ³digo: Copie e cole todo o cÃ³digo Python fornecido abaixo na primeira cÃ©lula do notebook.

Execute a CÃ©lula: Clique no botÃ£o de "Play" (executar) ao lado da cÃ©lula de cÃ³digo.

Interaja: O chatbot comeÃ§arÃ¡ a rodar e vocÃª poderÃ¡ interagir com a Moeda MÃ¡gica digitando suas respostas nas caixas de entrada que aparecerÃ£o abaixo da cÃ©lula. Siga as instruÃ§Ãµes do chatbot para explorar as funcionalidades.

CÃ³digo
```python

Instalar Framework de agentes do Google
!pip install -q google-adk

from google.adk.agents import Agent
from google.adk.runners import Runner
from google.adk.sessions import InMemorySessionService
from google.adk.tools import google_search
from google.genai import types
from datetime import date
import textwrap
from IPython.display import display, Markdown
import warnings

warnings.filterwarnings("ignore")

FunÃ§Ã£o auxiliar que envia uma mensagem para um agente via Runner e retorna a resposta final
def call_agent(agent: Agent, message_text: str) -> str:
session_service = InMemorySessionService()
session = session_service.create_session(app_name=agent.name, user_id="kid_user", session_id="session_1")
runner = Runner(agent=agent, app_name=agent.name, session_service=session_service)
content = types.Content(role="user", parts=[types.Part(text=message_text)])

final_response = ""
for event in runner.run(user_id="kid_user", session_id="session_1", new_message=content):
    if event.is_final_response():
        for part in event.content.parts:
            if part.text is not None:
                final_response += part.text
                final_response += "\n"
return final_response

FunÃ§Ã£o auxiliar para exibir texto formatado em Markdown no Colab
def to_markdown(text):
text = text.replace('â€¢', '  *')
return Markdown(textwrap.indent(text, '> ', predicate=lambda _: True))

##################################################

--- Agente 1: Boas-Vindas e IntenÃ§Ã£o ---
##################################################
def agente_boas_vindas(nome_crianca):
boas_vindas_agente = Agent(
name="boas_vindas_agente",
model="gemini-2.0-flash",
instruction=f'''
OlÃ¡, {nome_crianca}! Eu sou a Moeda MÃ¡gica, sua amiga especial para aprender sobre o mundo do dinheiro! âœ¨
Estou super animada para te ajudar hoje. Sobre o que vocÃª gostaria de conversar?
Podemos falar sobre como guardar dinheiro, sonhar com algo legal para comprar ou aprender sobre a poupanÃ§a.
Escolhe uma dessas opÃ§Ãµes para comeÃ§armos nossa aventura financeira! ğŸ˜Š
''',
description="Agente para dar boas-vindas personalizadas Ã  crianÃ§a e identificar sua intenÃ§Ã£o."
)
return boas_vindas_agente

##################################################

--- Agente 2: Agente de DefiniÃ§Ã£o de Objetivos ---
##################################################
def agente_objetivo(nome_crianca):
objetivo_agente = Agent(
name="agente_objetivo",
model="gemini-2.0-flash",
instruction=f'''
Que legal que vocÃª quer sonhar em comprar algo, {nome_crianca}! Me conta qual Ã© essa coisa mÃ¡gica que vocÃª gostaria de ter?
Pode ser um brinquedo, um jogo, uma viagem... o que estiver na sua imaginaÃ§Ã£o!
Depois de me contar, podemos tentar descobrir quanto custa e ver se tem opÃ§Ãµes mais em conta, que tal? ğŸ˜‰
''',
description="Agente para ajudar a crianÃ§a a definir seu objetivo de poupanÃ§a e iniciar a busca de preÃ§os."
)
return objetivo_agente

##################################################

--- Agente 3: Agente de ExplicaÃ§Ã£o da PoupanÃ§a ---
##################################################
def agente_poupanca(nome_crianca):
poupanca_agente = Agent(
name="agente_poupanca",
model="gemini-2.0-flash",
instruction=f'''
Entendi, {nome_crianca}! Poupar Ã© como juntar estrelinhas brilhantes em um cofrinho mÃ¡gico para alcanÃ§ar seus sonhos! âœ¨
Cada estrelinha que vocÃª guarda te deixa mais perto de conseguir aquela coisa especial.
Ã‰ como construir um castelo de areia, grÃ£o por grÃ£o! Quer saber mais sobre como poupar direitinho? ğŸ˜Š
''',
description="Agente para explicar o conceito de poupanÃ§a."
)
return agente_poupanca

##################################################

--- Agente 4: Agente de Plano de PoupanÃ§a ---
##################################################
def agente_plano(nome_crianca):
plano_agente = Agent(
name="agente_plano",
model="gemini-2.0-flash",
instruction=f'''
Vamos criar um plano mÃ¡gico para vocÃª conseguir seu objetivo, {nome_crianca}!
Para isso, me conta: vocÃª recebe alguma mesada? Ajuda em casa para ganhar um dinheirinho?
Pensa um pouquinho e me diz quanto vocÃª acha que consegue guardar por semana ou por mÃªs.
Assim, a gente pode descobrir em quanto tempo a magia vai acontecer! ğŸ§™â€â™‚ï¸
''',
description="Agente para criar um plano de poupanÃ§a para a crianÃ§a."
)
return agente_plano

##################################################

--- Agente 5: Agente de Acompanhamento ---
##################################################
def agente_acompanhamento(nome_crianca):
acompanhamento_agente = Agent(
name="agente_acompanhamento",
model="gemini-2.0-flash",
instruction=f'''
OlÃ¡ novamente, {nome_crianca}! Que legal te ver de novo! ğŸ˜Š
Me conta, quantas estrelinhas mÃ¡gicas vocÃª conseguiu guardar essa semana para o seu sonho?
Lembre-se, cada pouquinho conta e te deixa mais perto da sua magia! âœ¨
Se precisar de ideias de como guardar mais, me diz! ğŸ˜‰
''',
description="Agente para acompanhar o progresso da crianÃ§a e oferecer incentivo."
)
return agente_acompanhamento

##################################################

--- Agente 6: Agente de Busca de PreÃ§os ---
##################################################
def agente_busca_preco():
busca_preco_agente = Agent(
name="agente_busca_preco",
model="gemini-2.0-flash",
instruction='''
VocÃª Ã© a 'Lupa MÃ¡gica de PreÃ§os' da Moeda MÃ¡gica. Sua tarefa Ã© usar a ferramenta de busca do Google (google_search)
para encontrar informaÃ§Ãµes sobre o preÃ§o de um item que a crianÃ§a quer comprar.
Tente encontrar o preÃ§o mÃ©dio e, o mais importante, opÃ§Ãµes mais baratas ou de bom custo-benefÃ­cio,
incluindo o nome das lojas online onde vocÃª encontrou essas ofertas (se a informaÃ§Ã£o estiver clara nos resultados).

    Apresente as informaÃ§Ãµes de forma super amigÃ¡vel para a crianÃ§a. Use frases como:
    - 'Olha sÃ³ o que achei na [Nome da Loja]! Que tal esse [Nome do Item], parece ter um preÃ§o bem legal: [PreÃ§o]. O que vocÃª acha?'
    - 'Fiz uma pesquisa e encontrei uma opÃ§Ã£o um pouco mais barata na [Nome da Loja]: [PreÃ§o]. Essa pode ser uma boa alternativa para vocÃª!'
    - 'Vi tambÃ©m na [Nome da Loja] essa outra opÃ§Ã£o por [PreÃ§o]. Parece um bom negÃ³cio!'

    Se encontrar links diretos para as pÃ¡ginas dos produtos, vocÃª pode mencionar:
    - 'Se quiser dar uma olhada, peÃ§a ajuda para acessar esse link: [Link do Produto].' (Lembre-se, crianÃ§as precisam de ajuda para acessar links).

    Limite-se a apresentar no mÃ¡ximo 2 ou 3 opÃ§Ãµes para nÃ£o confundir a crianÃ§a.
    Se o item for muito vago, peÃ§a para a crianÃ§a ser mais especÃ­fica.
    ''',
    description="Agente para buscar informaÃ§Ãµes de preÃ§os de produtos no Google e apresentar de forma amigÃ¡vel para crianÃ§as.",
    tools=[google_search]
)
return busca_preco_agente

##################################################

--- Agente 7: Agente de ExplicaÃ§Ã£o de Conceitos Financeiros ---
##################################################
def agente_explicar_conceito(nome_crianca, tema):
explicar_agente = Agent(
name=f"agente_explicar_{tema.replace(' ', '_').lower()}",
model="gemini-2.0-flash",
instruction=f'''
OlÃ¡ novamente, {nome_crianca}! Que Ã³timo que vocÃª quer aprender sobre '{tema}'! ğŸ˜Š
Explique o conceito de '{tema}' para uma crianÃ§a de forma simples, divertida e com exemplos prÃ¡ticos.
Tente usar analogias ou histÃ³rias para facilitar o entendimento.
''',
description=f"Agente para explicar o conceito de '{tema}' para crianÃ§as."
)
return agente_explicar_conceito

--- InÃ­cio da Conversa ---
if name == "main":
print("ğŸš€ Iniciando a Aventura Financeira com a Moeda MÃ¡gica! ğŸš€")
nome_crianca = input("ğŸ˜Š OlÃ¡! Qual Ã© o seu nome? ")
print(f"\nMoeda MÃ¡gica: OlÃ¡, {nome_crianca}! Que bom ter vocÃª por aqui!")

boas_vindas = agente_boas_vindas(nome_crianca)
resposta_boas_vindas = call_agent(boas_vindas, f"Meu nome Ã© {nome_crianca}.")
print("\n--- ğŸ“ Moeda MÃ¡gica ---\n")
display(to_markdown(resposta_boas_vindas))
print("--------------------------------------------------------------")

# --- PrÃ³ximo passo: Definir o objetivo e perguntar sobre a busca de preÃ§os ---
objetivo = agente_objetivo(nome_crianca)
mensagem_objetivo = input(f"VocÃª: (diga o que vocÃª quer comprar) ")
resposta_objetivo = call_agent(objetivo, mensagem_objetivo)
print("\n--- ğŸ“ Moeda MÃ¡gica (Definindo Objetivo) ---\n")
display(to_markdown(resposta_objetivo))
print("--------------------------------------------------------------")

# --- Pergunta se a crianÃ§a quer buscar preÃ§os ---
quer_buscar_preco = input(f"VocÃª ({nome_crianca}, quer saber os preÃ§os? sim/nÃ£o): ")
if "sim" in quer_buscar_preco.lower():
    busca_preco = agente_busca_preco()
    pergunta_busca = input(f"VocÃª (qual item vocÃª quer pesquisar o preÃ§o, {nome_crianca}?): ")
    resposta_busca_preco = call_agent(busca_preco, pergunta_busca)
    print("\n--- ğŸ“ Lupa MÃ¡gica de PreÃ§os ---\n")
    display(to_markdown(resposta_busca_preco))
    print("--------------------------------------------------------------")
else:
    print(f"\nMoeda MÃ¡gica: Tudo bem, {nome_crianca}! Vamos continuar planejando seu sonho mÃ¡gico! âœ¨")

# --- PrÃ³ximo passo: Explicar a poupanÃ§a ---
poupanca = agente_poupanca(nome_crianca)
mensagem_poupanca = input(f"VocÃª: (pergunta sobre poupanÃ§a) ")
resposta_poupanca = call_agent(poupanca, mensagem_poupanca)
print("\n--- ğŸ“ Moeda MÃ¡gica (Explicando PoupanÃ§a) ---\n")
display(to_markdown(resposta_poupanca))
print("--------------------------------------------------------------")

# --- PrÃ³ximo passo: Criar o plano de poupanÃ§a ---
plano = agente_plano(nome_crianca)
mensagem_plano = input(f"VocÃª: (fala sobre sua mesada/ajuda em casa) ")
resposta_plano = call_agent(plano, mensagem_plano)
print("\n--- ğŸ“ Moeda MÃ¡gica (Criando Plano) ---\n")
display(to_markdown(resposta_plano))
print("--------------------------------------------------------------")

# --- PrÃ³ximo passo: Acompanhamento (simulaÃ§Ã£o de uma interaÃ§Ã£o) ---
acompanhamento = agente_acompanhamento(nome_crianca)
mensagem_acompanhamento = input(f"VocÃª ({nome_crianca}, uma semana depois): ")
resposta_acompanhamento = call_agent(acompanhamento, mensagem_acompanhamento)
print("\n--- ğŸ“ Moeda MÃ¡gica (Acompanhamento) ---\n")
display(to_markdown(resposta_acompanhamento))
print("--------------------------------------------------------------")

continuar = input(f"VocÃª gostaria de continuar a aventura financeira com a Moeda MÃ¡gica, {nome_crianca}? (sim/nÃ£o): ")
if "nÃ£o" in continuar.lower():
    print(f"\nMoeda MÃ¡gica: Foi Ã³timo aprender com vocÃª hoje, {nome_crianca}! AtÃ© a prÃ³xima aventura financeira! ğŸ‘‹")
else:
    print(f"\nMoeda MÃ¡gica: Que legal, {nome_crianca}! Em que mais posso te ajudar hoje?")
    while True:
        proximo_passo = input(f"VocÃª ({nome_crianca}): (gostaria de falar sobre 'guardar dinheiro', 'comprar algo' ou 'aprender mais'?) ")
        if "guardar" in proximo_passo.lower():
            poupanca = agente_poupanca(nome_crianca)
            mensagem_poupanca = input(f"VocÃª: (pergunta sobre poupanÃ§a) ")
            resposta_poupanca = call_agent(poupanca, mensagem_poupanca)
            print("\n--- ğŸ“ Moeda MÃ¡gica (Explicando PoupanÃ§a) ---\n")
            display(to_markdown(resposta_poupanca))
            print("--------------------------------------------------------------")
        elif "comprar" in proximo_passo.lower():
            objetivo = agente_objetivo(nome_crianca)
            mensagem_objetivo = input(f"VocÃª: (diga o que vocÃª quer comprar) ")
            resposta_objetivo = call_agent(objetivo, mensagem_objetivo)
            print("\n--- ğŸ“ Moeda MÃ¡gica (Definindo Objetivo) ---\n")
            display(to_markdown(resposta_objetivo))
            print("--------------------------------------------------------------")
            quer_buscar_preco = input(f"VocÃª ({nome_crianca}, quer saber os preÃ§os? sim/nÃ£o): ")
            if "sim" in quer_buscar_preco.lower():
                busca_preco = agente_busca_preco()
                pergunta_busca = input(f"VocÃª (qual item vocÃª quer pesquisar o preÃ§o, {nome_crianca}?): ")
                resposta_busca_preco = call_agent(busca_preco, pergunta_busca)
                print("\n--- ğŸ“ Lupa MÃ¡gica de PreÃ§os ---\n")
                display(to_markdown(resposta_busca_preco))
                print("--------------------------------------------------------------")
        elif "aprender mais" in proximo_passo.lower():
            print("\nMoeda MÃ¡gica: Que Ã³timo! Podemos conversar sobre como o dinheiro funciona, a diferenÃ§a entre precisar e querer, ou como podemos ajudar outras pessoas com o dinheiro. Qual desses assuntos te interessa?")
            tema_aprender = input(f"VocÃª ({nome_crianca}): ")
            print(f"\nMoeda MÃ¡gica: Interessante! Vamos aprender mais sobre '{tema_aprender}'!")
            # Criando e chamando um agente para explicar o tema escolhido
            agente_explicar = agente_explicar_conceito(nome_crianca, tema_aprender)
            resposta_explicar = call_agent(agente_explicar, f"Explique '{tema_aprender}' para mim.")
            print("\n--- ğŸ“ Moeda MÃ¡gica (Aprendendo Mais) ---\n")
            display(to_markdown(resposta_explicar))
            print("--------------------------------------------------------------")
            # ApÃ³s explicar o tema, podemos perguntar se a crianÃ§a quer aprender mais ou sair
            continuar_aprendendo = input(f"VocÃª ({nome_crianca}), gostaria de aprender sobre outro tema? (sim/nÃ£o): ")
            if "nÃ£o" in continuar_aprendendo.lower():
                break
        elif "nÃ£o" in proximo_passo.lower() or "parar" in proximo_passo.lower() or "fim" in proximo_passo.lower():
            print(f"\nMoeda MÃ¡gica: Foi muito divertido aprender com vocÃª hoje, {nome_crianca}! AtÃ© a prÃ³xima! ğŸ‘‹")
            break
        else:
            print("\nMoeda MÃ¡gica: Desculpe, nÃ£o entendi. VocÃª gostaria de falar sobre 'guardar dinheiro', 'comprar algo' ou 'aprender mais'?")

print("\nAventura financeira finalizada!")
```

PrÃ³ximos Passos e Melhorias Planejadas
Implementar um sistema robusto para gerenciar o estado da conversa e lembrar o progresso dos usuÃ¡rios entre as sessÃµes.

Adicionar mais agentes para cobrir outros tÃ³picos de educaÃ§Ã£o financeira (orÃ§amento, querer vs. precisar, doaÃ§Ã£o, etc.).

Integrar elementos visuais e interativos (se a plataforma permitir) para tornar a experiÃªncia mais envolvente para as crianÃ§as.

Personalizar as respostas e o nÃ­vel de detalhe com base na idade da crianÃ§a (se possÃ­vel).

Adicionar mecanismos de feedback para que as crianÃ§as possam avaliar a ajuda da Moeda MÃ¡gica.

CrÃ©ditos
Alura (https://www.alura.com.br/)

Google Gemini (https://gemini.google.com/)

Autor
Welita Luisa Xavier Mendes (https://www.linkedin.com/in/welita-mendes/)
"""

# Commented out IPython magic to ensure Python compatibility.
# %pip -q install google-genai

# Configura a API Key do Google Gemini

import os
from google.colab import userdata

os.environ["GOOGLE_API_KEY"] = userdata.get('GOOGLE_API_KEY')

# Instalar Framework de agentes do Google ################################################
!pip install -q google-adk

from google.adk.agents import Agent
from google.adk.runners import Runner
from google.adk.sessions import InMemorySessionService
from google.adk.tools import google_search
from google.genai import types
from datetime import date
import textwrap
from IPython.display import display, Markdown
import warnings

warnings.filterwarnings("ignore")

# FunÃ§Ã£o auxiliar que envia uma mensagem para um agente via Runner e retorna a resposta final
def call_agent(agent: Agent, message_text: str) -> str:
    session_service = InMemorySessionService()
    session = session_service.create_session(app_name=agent.name, user_id="kid_user", session_id="session_1")
    runner = Runner(agent=agent, app_name=agent.name, session_service=session_service)
    content = types.Content(role="user", parts=[types.Part(text=message_text)])

    final_response = ""
    for event in runner.run(user_id="kid_user", session_id="session_1", new_message=content):
        if event.is_final_response():
            for part in event.content.parts:
                if part.text is not None:
                    final_response += part.text
                    final_response += "\n"
    return final_response

# FunÃ§Ã£o auxiliar para exibir texto formatado em Markdown no Colab
def to_markdown(text):
    text = text.replace('â€¢', '  *')
    return Markdown(textwrap.indent(text, '> ', predicate=lambda _: True))

##################################################
# --- Agente 1: Boas-Vindas e IntenÃ§Ã£o --- #
##################################################
def agente_boas_vindas(nome_crianca):
    boas_vindas_agente = Agent(
        name="boas_vindas_agente",
        model="gemini-2.0-flash",
        instruction=f"""
        OlÃ¡, {nome_crianca}! Eu sou a Moeda MÃ¡gica, sua amiga especial para aprender sobre o mundo do dinheiro! âœ¨
        Estou super animada para te ajudar hoje. Sobre o que vocÃª gostaria de conversar?
        Podemos falar sobre como guardar dinheiro, sonhar com algo legal para comprar ou aprender sobre a poupanÃ§a.
        Escolhe uma dessas opÃ§Ãµes para comeÃ§armos nossa aventura financeira! ğŸ˜Š
        """,
        description="Agente para dar boas-vindas personalizadas Ã  crianÃ§a e identificar sua intenÃ§Ã£o."
    )
    return boas_vindas_agente

##################################################
# --- Agente 2: Agente de DefiniÃ§Ã£o de Objetivos --- #
##################################################
def agente_objetivo(nome_crianca):
    objetivo_agente = Agent(
        name="agente_objetivo",
        model="gemini-2.0-flash",
        instruction=f"""
        Que legal que vocÃª quer sonhar em comprar algo, {nome_crianca}! Me conta qual Ã© essa coisa mÃ¡gica que vocÃª gostaria de ter?
        Pode ser um brinquedo, um jogo, uma viagem... o que estiver na sua imaginaÃ§Ã£o!
        Depois de me contar, podemos tentar descobrir quanto custa e ver se tem opÃ§Ãµes mais em conta, que tal? ğŸ˜‰
        """,
        description="Agente para ajudar a crianÃ§a a definir seu objetivo de poupanÃ§a e iniciar a busca de preÃ§os."
    )
    return objetivo_agente

##################################################
# --- Agente 3: Agente de ExplicaÃ§Ã£o da PoupanÃ§a --- #
##################################################
def agente_poupanca(nome_crianca):
    poupanca_agente = Agent(
        name="agente_poupanca",
        model="gemini-2.0-flash",
        instruction=f"""
        Entendi, {nome_crianca}! Poupar Ã© como juntar estrelinhas brilhantes em um cofrinho mÃ¡gico para alcanÃ§ar seus sonhos! âœ¨
        Cada estrelinha que vocÃª guarda te deixa mais perto de conseguir aquela coisa especial.
        Ã‰ como construir um castelo de areia, grÃ£o por grÃ£o! Quer saber mais sobre como poupar direitinho? ğŸ˜Š
        """,
        description="Agente para explicar o conceito de poupanÃ§a."
    )
    return poupanca_agente

##################################################
# --- Agente 4: Agente de Plano de PoupanÃ§a --- #
##################################################
def agente_plano(nome_crianca):
    plano_agente = Agent(
        name="agente_plano",
        model="gemini-2.0-flash",
        instruction=f"""
        Vamos criar um plano mÃ¡gico para vocÃª conseguir seu objetivo, {nome_crianca}!
        Para isso, me conta: vocÃª recebe alguma mesada? Ajuda em casa para ganhar um dinheirinho?
        Pensa um pouquinho e me diz quanto vocÃª acha que consegue guardar por semana ou por mÃªs.
        Assim, a gente pode descobrir em quanto tempo a magia vai acontecer! ğŸ§™â€â™‚ï¸
        """,
        description="Agente para criar um plano de poupanÃ§a para a crianÃ§a."
    )
    return plano_agente

##################################################
# --- Agente 5: Agente de Acompanhamento --- #
##################################################
def agente_acompanhamento(nome_crianca):
    acompanhamento_agente = Agent(
        name="agente_acompanhamento",
        model="gemini-2.0-flash",
        instruction=f"""
        OlÃ¡ novamente, {nome_crianca}! Que legal te ver de novo! ğŸ˜Š
        Me conta, quantas estrelinhas mÃ¡gicas vocÃª conseguiu guardar essa semana para o seu sonho?
        Lembre-se, cada pouquinho conta e te deixa mais perto da sua magia! âœ¨
        Se precisar de ideias de como guardar mais, me diz! ğŸ˜‰
        """,
        description="Agente para acompanhar o progresso da crianÃ§a e oferecer incentivo."
    )
    return acompanhamento_agente

##################################################
# --- Agente 6: Agente de Busca de PreÃ§os --- #
##################################################
def agente_busca_preco():
    busca_preco_agente = Agent(
        name="agente_busca_preco",
        model="gemini-2.0-flash",
        instruction="""
        VocÃª Ã© a 'Lupa MÃ¡gica de PreÃ§os' da Moeda MÃ¡gica. Sua tarefa Ã© usar a ferramenta de busca do Google (google_search)
        para encontrar informaÃ§Ãµes sobre o preÃ§o de um item que a crianÃ§a quer comprar.
        Tente encontrar o preÃ§o mÃ©dio e, o mais importante, opÃ§Ãµes mais baratas ou de bom custo-benefÃ­cio,
        incluindo o nome das lojas online onde vocÃª encontrou essas ofertas (se a informaÃ§Ã£o estiver clara nos resultados).

        Apresente as informaÃ§Ãµes de forma super amigÃ¡vel para a crianÃ§a. Use frases como:
        - 'Olha sÃ³ o que achei na [Nome da Loja]! Que tal esse [Nome do Item], parece ter um preÃ§o bem legal: [PreÃ§o]. O que vocÃª acha?'
        - 'Fiz uma pesquisa e encontrei uma opÃ§Ã£o um pouco mais barata na [Nome da Loja]: [PreÃ§o]. Essa pode ser uma boa alternativa para vocÃª!'
        - 'Vi tambÃ©m na [Nome da Loja] essa outra opÃ§Ã£o por [PreÃ§o]. Parece um bom negÃ³cio!'

        Se encontrar links diretos para as pÃ¡ginas dos produtos, vocÃª pode mencionar:
        - 'Se quiser dar uma olhada, peÃ§a ajuda para acessar esse link: [Link do Produto].' (Lembre-se, crianÃ§as precisam de ajuda para acessar links).

        Limite-se a apresentar no mÃ¡ximo 2 ou 3 opÃ§Ãµes para nÃ£o confundir a crianÃ§a.
        Se o item for muito vago, peÃ§a para a crianÃ§a ser mais especÃ­fica.
        """,
        description="Agente para buscar informaÃ§Ãµes de preÃ§os de produtos no Google e apresentar de forma amigÃ¡vel para crianÃ§as.",
        tools=[google_search]
    )
    return busca_preco_agente

##################################################
# --- Agente 7: Agente de ExplicaÃ§Ã£o de Conceitos Financeiros --- #
##################################################
def agente_explicar_conceito(nome_crianca, tema):
    explicar_agente = Agent(
        name=f"agente_explicar_{tema.replace(' ', '_').lower()}",
        model="gemini-2.0-flash",
        instruction=f"""
        OlÃ¡ novamente, {nome_crianca}! Que Ã³timo que vocÃª quer aprender sobre '{tema}'! ğŸ˜Š
        Explique o conceito de '{tema}' para uma crianÃ§a de forma simples, divertida e com exemplos prÃ¡ticos.
        Tente usar analogias ou histÃ³rias para facilitar o entendimento.
        """,
        description=f"Agente para explicar o conceito de '{tema}' para crianÃ§as."
    )
    return explicar_agente

# --- InÃ­cio da Conversa ---
if __name__ == "__main__":
    print("ğŸš€ Iniciando a Aventura Financeira com a Moeda MÃ¡gica! ğŸš€")
    nome_crianca = input("ğŸ˜Š OlÃ¡! Qual Ã© o seu nome? ")
    print(f"\nMoeda MÃ¡gica: OlÃ¡, {nome_crianca}! Que bom ter vocÃª por aqui!")

    boas_vindas = agente_boas_vindas(nome_crianca)
    resposta_boas_vindas = call_agent(boas_vindas, f"Meu nome Ã© {nome_crianca}.")
    print("\n--- ğŸ“ Moeda MÃ¡gica ---\n")
    display(to_markdown(resposta_boas_vindas))
    print("--------------------------------------------------------------")

    # --- PrÃ³ximo passo: Definir o objetivo e perguntar sobre a busca de preÃ§os ---
    objetivo = agente_objetivo(nome_crianca)
    mensagem_objetivo = input(f"VocÃª: (diga o que vocÃª quer comprar) ")
    resposta_objetivo = call_agent(objetivo, mensagem_objetivo)
    print("\n--- ğŸ“ Moeda MÃ¡gica (Definindo Objetivo) ---\n")
    display(to_markdown(resposta_objetivo))
    print("--------------------------------------------------------------")

    # --- Pergunta se a crianÃ§a quer buscar preÃ§os ---
    quer_buscar_preco = input(f"VocÃª ({nome_crianca}, quer saber os preÃ§os? sim/nÃ£o): ")
    if "sim" in quer_buscar_preco.lower():
        busca_preco = agente_busca_preco()
        pergunta_busca = input(f"VocÃª (qual item vocÃª quer pesquisar o preÃ§o, {nome_crianca}?): ")
        resposta_busca_preco = call_agent(busca_preco, pergunta_busca)
        print("\n--- ğŸ“ Lupa MÃ¡gica de PreÃ§os ---\n")
        display(to_markdown(resposta_busca_preco))
        print("--------------------------------------------------------------")
    else:
        print(f"\nMoeda MÃ¡gica: Tudo bem, {nome_crianca}! Vamos continuar planejando seu sonho mÃ¡gico! âœ¨")

    # --- PrÃ³ximo passo: Explicar a poupanÃ§a ---
    poupanca = agente_poupanca(nome_crianca)
    mensagem_poupanca = input(f"VocÃª: (pergunta sobre poupanÃ§a) ")
    resposta_poupanca = call_agent(poupanca, mensagem_poupanca)
    print("\n--- ğŸ“ Moeda MÃ¡gica (Explicando PoupanÃ§a) ---\n")
    display(to_markdown(resposta_poupanca))
    print("--------------------------------------------------------------")

    # --- PrÃ³ximo passo: Criar o plano de poupanÃ§a ---
    plano = agente_plano(nome_crianca)
    mensagem_plano = input(f"VocÃª: (fala sobre sua mesada/ajuda em casa) ")
    resposta_plano = call_agent(plano, mensagem_plano)
    print("\n--- ğŸ“ Moeda MÃ¡gica (Criando Plano) ---\n")
    display(to_markdown(resposta_plano))
    print("--------------------------------------------------------------")

    # --- PrÃ³ximo passo: Acompanhamento (simulaÃ§Ã£o de uma interaÃ§Ã£o) ---
    acompanhamento = agente_acompanhamento(nome_crianca)
    mensagem_acompanhamento = input(f"VocÃª ({nome_crianca}, uma semana depois): ")
    resposta_acompanhamento = call_agent(acompanhamento, mensagem_acompanhamento)
    print("\n--- ğŸ“ Moeda MÃ¡gica (Acompanhamento) ---\n")
    display(to_markdown(resposta_acompanhamento))
    print("--------------------------------------------------------------")

    continuar = input(f"VocÃª gostaria de continuar a aventura financeira com a Moeda MÃ¡gica, {nome_crianca}? (sim/nÃ£o): ")
    if "nÃ£o" in continuar.lower():
        print(f"\nMoeda MÃ¡gica: Foi Ã³timo aprender com vocÃª hoje, {nome_crianca}! AtÃ© a prÃ³xima aventura financeira! ğŸ‘‹")
    else:
        print(f"\nMoeda MÃ¡gica: Que legal, {nome_crianca}! Em que mais posso te ajudar hoje?")
        while True:
            proximo_passo = input(f"VocÃª ({nome_crianca}): (gostaria de falar sobre 'guardar dinheiro', 'comprar algo' ou 'aprender mais'?) ")
            if "guardar" in proximo_passo.lower():
                poupanca = agente_poupanca(nome_crianca)
                mensagem_poupanca = input(f"VocÃª: (pergunta sobre poupanÃ§a) ")
                resposta_poupanca = call_agent(poupanca, mensagem_poupanca)
                print("\n--- ğŸ“ Moeda MÃ¡gica (Explicando PoupanÃ§a) ---\n")
                display(to_markdown(resposta_poupanca))
                print("--------------------------------------------------------------")
            elif "comprar" in proximo_passo.lower():
                objetivo = agente_objetivo(nome_crianca)
                mensagem_objetivo = input(f"VocÃª: (diga o que vocÃª quer comprar) ")
                resposta_objetivo = call_agent(objetivo, mensagem_objetivo)
                print("\n--- ğŸ“ Moeda MÃ¡gica (Definindo Objetivo) ---\n")
                display(to_markdown(resposta_objetivo))
                print("--------------------------------------------------------------")
                quer_buscar_preco = input(f"VocÃª ({nome_crianca}, quer saber os preÃ§os? sim/nÃ£o): ")
                if "sim" in quer_buscar_preco.lower():
                    busca_preco = agente_busca_preco()
                    pergunta_busca = input(f"VocÃª (qual item vocÃª quer pesquisar o preÃ§o, {nome_crianca}?): ")
                    resposta_busca_preco = call_agent(busca_preco, pergunta_busca)
                    print("\n--- ğŸ“ Lupa MÃ¡gica de PreÃ§os ---\n")
                    display(to_markdown(resposta_busca_preco))
                    print("--------------------------------------------------------------")
            elif "aprender mais" in proximo_passo.lower():
                print("\nMoeda MÃ¡gica: Que Ã³timo! Podemos conversar sobre como o dinheiro funciona, a diferenÃ§a entre precisar e querer, ou como podemos ajudar outras pessoas com o dinheiro. Qual desses assuntos te interessa?")
                tema_aprender = input(f"VocÃª ({nome_crianca}): ")
                print(f"\nMoeda MÃ¡gica: Interessante! Vamos aprender mais sobre '{tema_aprender}'!")
                # Criando e chamando um agente para explicar o tema escolhido
                agente_explicar = agente_explicar_conceito(nome_crianca, tema_aprender)
                resposta_explicar = call_agent(agente_explicar, f"Explique '{tema_aprender}' para mim.")
                print("\n--- ğŸ“ Moeda MÃ¡gica (Aprendendo Mais) ---\n")
                display(to_markdown(resposta_explicar))
                print("--------------------------------------------------------------")
                # ApÃ³s explicar o tema, podemos perguntar se a crianÃ§a quer aprender mais ou sair
                continuar_aprendendo = input(f"VocÃª ({nome_crianca}), gostaria de aprender sobre outro tema? (sim/nÃ£o): ")
                if "nÃ£o" in continuar_aprendendo.lower():
                    break
            elif "nÃ£o" in proximo_passo.lower() or "parar" in proximo_passo.lower() or "fim" in proximo_passo.lower():
                print(f"\nMoeda MÃ¡gica: Foi muito divertido aprender com vocÃª hoje, {nome_crianca}! AtÃ© a prÃ³xima! ğŸ‘‹")
                break
            else:
                print("\nMoeda MÃ¡gica: Desculpe, nÃ£o entendi. VocÃª gostaria de falar sobre 'guardar dinheiro', 'comprar algo' ou 'aprender mais'?")

print("\nAventura financeira finalizada!")

